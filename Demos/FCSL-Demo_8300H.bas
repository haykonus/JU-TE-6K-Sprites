2 BREM 255,255,255,255,255,0,0,0,0,0,0,255,255,255,255,255
BREM255,255,255,0,0,11,11,11,11,11,11,0,0,255,255,255
BREM 255,255,0,11,11,11,11,11,11,11,11,11,11,0,255,255
BREM 255,0,11,11,11,11,0,0,11,0,0,11,11,11,0,255
BREM 255,0,11,11,11,0,11,11,0,11,11,0,11,11,0,255
BREM 0,11,11,11,11,0,11,0,0,11,0,0,11,11,11,0
BREM 0,11,11,11,11,0,11,0,0,11,0,0,11,11,11,0
BREM 0,11,11,11,11,11,0,0,11,0,0,11,11,11,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0
BREM 0,11,11,11,11,0,11,11,11,11,11,0,11,11,11,0
BREM 255,0,11,11,11,11,0,0,0,0,0,11,11,11,0,255
BREM 255,0,11,11,11,11,11,11,9,9,9,11,11,11,0,255
BREM 255,255,0,11,11,11,11,11,11,9,11,11,11,0,255,255
BREM 255,255,255,0,0,11,11,11,11,11,11,0,0,255,255,255
BREM 255,255,255,255,255,0,0,0,0,0,0,255,255,255,255,255

3 BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,0,11,11,11,11,11,11,11,11,11,11,11,11,0,63
BREM 63,0,11,11,11,11,11,11,11,11,11,11,11,11,0,63
BREM 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
BREM 0,11,0,15,15,0,0,0,0,15,15,0,0,11,11,0
BREM 0,11,0,15,0,0,0,11,0,15,0,0,0,11,11,0
BREM 0,11,11,0,0,0,11,11,11,0,0,0,11,11,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0
BREM 63,0,11,11,11,11,11,11,11,11,0,11,11,11,0,63
BREM 63,0,11,11,11,0,0,0,0,0,11,11,11,11,0,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63

4 BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,0,11,11,11,11,0,0,11,0,0,11,11,11,0,63
BREM 63,0,11,11,11,0,11,11,0,11,11,0,11,11,0,63
BREM 0,11,11,11,11,0,0,11,0,0,11,0,11,11,11,0
BREM 0,11,11,11,11,0,0,11,0,0,11,0,11,11,11,0
BREM 0,11,11,11,11,11,0,0,11,0,0,11,11,11,11,0
BREM 0,11,9,9,11,11,11,11,11,11,11,11,9,9,11,0
BREM 0,11,9,9,11,11,11,11,11,11,11,11,9,9,11,0
BREM 0,11,11,11,0,11,11,11,11,11,11,0,11,11,11,0
BREM 63,0,11,11,11,0,0,0,0,0,0,11,11,11,0,63
BREM 63,0,11,11,11,11,11,11,11,11,11,11,11,11,0,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63

5 BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,0,11,11,11,0,0,11,0,0,11,11,11,11,0,63
BREM 63,0,11,11,0,11,11,0,11,11,0,11,11,11,0,63
BREM 0,11,11,11,0,11,0,0,11,0,0,11,11,11,11,0
BREM 0,11,11,11,0,11,0,0,11,0,0,11,11,11,11,0
BREM 0,11,11,11,11,0,0,11,0,0,11,11,11,11,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,15,9,15,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,9,9,9,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,15,9,15,11,0
BREM 63,0,11,11,11,0,0,0,0,0,11,11,11,11,0,63
BREM 63,0,11,11,11,11,11,11,11,11,11,11,11,11,0,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63


10 REM --- program parameter ------------

15 REM A = loops
16 REM B = steps
17 REM C = start_dir
18 REM D = start_steps

20 REM --- WALK_SPRITE parameter

21 REM V = wtimer
22 REM W = steps
23 REM X = wstepw
24 REM Y = wdir
25 REM Z = wslot

30 REM --- start -------------------------

35 GOSUB 400; REM INIT

40 REM --- WALK_SPRITE initial setup

45 LET W=1;    	REM wsteps
50 LET V=0;    	REM wtimer
55 LET X=2;    	REM wstepw

60 REM --- start parameter ---
		
65 LET A=0;    	REM loops
70 LET C=3;    	REM start_dir
80 LET D=40;   	REM start_steps

90 REM --- dancing ---

110 LET B=D;   	REM steps = start_steps
120 LET Y=C;   	REM wdir = start_dir

130 GOSUB 500; REM 1 STEP
140 LET B=B-1
150 IF B>0 GOTO 130 

160 LET C=C+1; 	REM start_dir + 1 
190 IF (A $AND 7)>=4 GOTO 240;	REM switch direction

200 LET D=D/2; 	REM start_steps / 2
210 LET X=X*2; 	REM wstepw * 2
220 GOTO 270 

240 LET D=D*2;	REM start_steps * 2
250 LET X=X/2;	REM wstepw / 2

270 LET A=A+1
280 IF A<8 GOTO 110
 
300 END


400 REM --- INIT ---------------------

401 PROC SETEB[%F7A0,13]; PROC PTC[12];

410 LET Z=0, X=72, Y=89, W=%E003
420 CALL %8300; REM INIT Smiley0

430 LET Z=1, X=152, Y=8, W=%E003+(Z*260)
440 CALL %8300; REM INIT Smiley1

450 LET Z=2, X=232, Y=89, W=%E003+(Z*260)
460 CALL %8300; REM INIT Smiley2

470 LET Z=3, X=153, Y=169, W=%E003+(Z*260)
480 CALL %8300; REM INIT Smiley3
490 RETURN


500 REM --- 1 STEP -------------------

501 LET Y=Y+1; Y=(Y $AND 3) $OR 4 
505 LET Z=0; CALL %830C; REM WALK

510 LET Y=Y+1; Y=(Y $AND 3) $OR 4
515 LET Z=1; CALL %830C; REM WALK

520 LET Y=Y+1; Y=(Y $AND 3) $OR 4
525 LET Z=2; CALL %830C; REM WALK

530 LET Y=Y+1; Y=(Y $AND 3) $OR 4
535 LET Z=3; CALL %830C; REM WALK
540 RETURN
