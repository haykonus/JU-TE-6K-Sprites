1 PROC SETRR[8,%8000]
2 BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,0,11,11,11,11,0,0,11,0,0,11,11,11,0,63
BREM 63,0,11,11,11,0,11,11,0,11,11,0,11,11,0,63
BREM 0,11,11,11,11,0,11,0,0,11,0,0,11,11,11,0
BREM 0,11,11,11,11,0,11,0,0,11,0,0,11,11,11,0
BREM 0,11,11,11,11,11,0,0,11,0,0,11,11,11,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0
BREM 0,11,11,11,11,0,11,11,11,11,11,0,11,11,11,0
BREM 63,0,11,11,11,11,0,0,0,0,0,11,11,11,0,63
BREM 63,0,11,11,11,11,11,11,9,9,9,11,11,11,0,63
BREM 63,63,0,11,11,11,11,11,11,9,11,11,11,0,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63

3 BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,0,11,11,11,11,11,11,11,11,11,11,11,11,0,63
BREM 63,0,11,11,11,11,11,11,11,11,11,11,11,11,0,63
BREM 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
BREM 0,11,0,15,15,0,0,0,0,15,15,0,0,11,11,0
BREM 0,11,0,15,0,0,0,11,0,15,0,0,0,11,11,0
BREM 0,11,11,0,0,0,11,11,11,0,0,0,11,11,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0
BREM 63,0,11,11,11,11,11,11,11,11,0,11,11,11,0,63
BREM 63,0,11,11,11,0,0,0,0,0,11,11,11,11,0,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63

4 BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,0,11,11,11,11,0,0,11,0,0,11,11,11,0,63
BREM 63,0,11,11,11,0,11,11,0,11,11,0,11,11,0,63
BREM 0,11,11,11,11,0,0,11,0,0,11,0,11,11,11,0
BREM 0,11,11,11,11,0,0,11,0,0,11,0,11,11,11,0
BREM 0,11,11,11,11,11,0,0,11,0,0,11,11,11,11,0
BREM 0,11,9,9,11,11,11,11,11,11,11,11,9,9,11,0
BREM 0,11,9,9,11,11,11,11,11,11,11,11,9,9,11,0
BREM 0,11,11,11,0,11,11,11,11,11,11,0,11,11,11,0
BREM 63,0,11,11,11,0,0,0,0,0,0,11,11,11,0,63
BREM 63,0,11,11,11,11,11,11,11,11,11,11,11,11,0,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63

5 BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,0,11,11,11,0,0,11,0,0,11,11,11,11,0,63
BREM 63,0,11,11,0,11,11,0,11,11,0,11,11,11,0,63
BREM 0,11,11,11,0,11,0,0,11,0,0,11,11,11,11,0
BREM 0,11,11,11,0,11,0,0,11,0,0,11,11,11,11,0
BREM 0,11,11,11,11,0,0,11,0,0,11,11,11,11,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,15,9,15,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,9,9,9,11,0
BREM 0,11,11,11,11,11,11,11,11,11,11,15,9,15,11,0
BREM 63,0,11,11,11,0,0,0,0,0,11,11,11,11,0,63
BREM 63,0,11,11,11,11,11,11,11,11,11,11,11,11,0,63
BREM 63,63,0,11,11,11,11,11,11,11,11,11,11,0,63,63
BREM 63,63,63,0,0,11,11,11,11,11,11,0,0,63,63,63
BREM 63,63,63,63,63,0,0,0,0,0,0,63,63,63,63,63

6 BREM 15,15,15,15,0,0,0,0,8,8,8,8,4,4,4,4
BREM 15,15,15,15,0,0,0,0,8,8,8,8,4,4,4,4
BREM 15,15,15,15,0,0,0,0,8,8,8,8,4,4,4,4
BREM 15,15,15,15,0,0,0,0,8,8,8,8,4,4,4,4
BREM 12,12,12,12,2,2,2,2,10,10,10,10,6,6,6,6
BREM 12,12,12,12,2,2,2,2,10,10,10,10,6,6,6,6
BREM 12,12,12,12,2,2,2,2,10,10,10,10,6,6,6,6
BREM 12,12,12,12,2,2,2,2,10,10,10,10,6,6,6,6
BREM 14,14,14,14,1,1,1,1,9,9,9,9,5,5,5,5
BREM 14,14,14,14,1,1,1,1,9,9,9,9,5,5,5,5
BREM 14,14,14,14,1,1,1,1,9,9,9,9,5,5,5,5
BREM 14,14,14,14,1,1,1,1,9,9,9,9,5,5,5,5
BREM 12,12,12,12,3,3,3,3,11,11,11,11,7,7,7,7
BREM 12,12,12,12,3,3,3,3,11,11,11,11,7,7,7,7
BREM 12,12,12,12,3,3,3,3,11,11,11,11,7,7,7,7
BREM 12,12,12,12,3,3,3,3,11,11,11,11,7,7,7,7


100 REM --- main

110 PROC COLOR[2,13];PROC CLS
120 GOSUB 700;  REM Testbild

130 LET T=2010; REM track1: init + fullcolor walk
140 GOSUB 600;  REM state machine

150 LET T=3010; REM track2: Smiley's, on your place !
160 GOSUB 600;  REM state machine

170 GOSUB 300;  REM dance !

180 LET T=4010; REM track3: back home ...
190 GOSUB 600;  REM state machine

200 LET T=5010; REM track4: bye ...
210 GOSUB 600;  REM state machine

220 PROC AT[0,0];PROC COLOR[2,13];END


300 REM --- dancing

305 REM --- start parameter
310 LET V=0;    REM wtimer
315 LET W=1;    REM wsteps
320 LET X=1;    REM wstepw

330 LET A=0;    REM loops
335 LET C=3;    REM start_dir
340 LET D=80;   REM start_steps

350 REM --- loop
355 LET B=D;    REM steps = start_steps
360 LET Y=C;    REM wdir = start_dir

365 GOSUB 500;  REM 1 step
370 LET B=B-1
375 IF B>0 GOTO 365 

380 LET C=C+1;  REM start_dir + 1 
385 IF (A $AND 7)>=4 GOTO 405;  REM switch speed

390 LET D=D/2;  REM start_steps / 2
395 LET X=X*2;  REM wstepw * 2
400 GOTO 415 

405 LET D=D*2;  REM start_steps * 2
410 LET X=X/2;  REM wstepw / 2

415 LET A=A+1
420 IF A<8 GOTO 355
425 RETURN


500 REM --- 1 step

510 LET Y=Y+1; Y=(Y $AND 3) $OR 4
520 LET Z=0; CALL %830C; REM WALK

530 LET Y=Y+1; Y=(Y $AND 3) $OR 4
540 LET Z=1; CALL %830C; REM WALK

550 LET Y=Y+1; Y=(Y $AND 3) $OR 4
560 LET Z=2; CALL %830C; REM WALK

570 LET Y=Y+1; Y=(Y $AND 3) $OR 4
580 LET Z=3; CALL %830C; REM WALK
590 RETURN


600 REM --- state machine

605 PROC RESTORE[T]
610 LET A=READ, V=READ, W=READ, X=READ, Y=READ, Z=READ
612 REM PRINT A,V,W,X,Y,Z
615 IF A=-1 RETURN
620 IF A=0 CALL %8300; REM INIT 
630 IF A=1 CALL %8303; REM SET
640 IF A=2 CALL %8306; REM CLR
650 IF A=3 CALL %8309; REM MOVE
660 IF A=4 CALL %830C; REM WALK
670 IF A=5 WAIT(V)   ; REM WAIT
680 LET T=T+10
690 GOTO 605


700 REM --- Testbild (C) R.Weidlich / V.Pohlers

701 REM GITTERNETZ;
702 LET I=1
703 PROC DRAW[16*I,0,16*I,191,15]
704 LET I=I+1; IF I<=19 THEN GOTO 703
705 LET I=1
706 PROC DRAW[0,16*I,319,16*I,15]
707 LET I=I+1; IF I<=15 THEN GOTO 706

708 REM KREISE
709 PROC CIRCLE[160,96,85,15]
710 PROC CIRCLE[24,24,16,15]
711 PROC CIRCLE[296,24,16,15]
712 PROC CIRCLE[24,168,16,15]
713 PROC CIRCLE[296,168,16,15]

714 REM Farbfelder
715 LET C=0,A=12,B=5,I=0
716 PROC COLOR[0,C]
717 PROC AT[A, B];PRINT"  ",
718 PROC AT[A, B+1];PRINT"  ",
719 LET C=C+15,A=A+2,I=I+1
720 IF I=8 THEN LET B=7,A=12
721 IF I<16 THEN GOTO 716

722 REM Zeichensatz
723 PROC COLOR[15,0]
724 LET C=0
725 PROC AT[C $MOD 16 + 12, C/16 + 10]
726 IF C<32 THEN PROC PTC[14];REM VORAB ESC
727 PROC PTC[C]
728 C=C+1;IF C<128 THEN GOTO 725

729 REM TEXT
730 PROC COLOR[0,15]
731 PROC AT[13,19];PRINT"JU+TE-COMPUTER"
732 PROC AT[18,20];PRINT"*6K*"

733 PROC AT[17,3];PRINT"*FCSL*"
734 PROC AT[8,4];PRINT"Sprite Demo (BASIC Vers.)"
790 RETURN


1000 REM --- track tables ----------------------------------

1001 REM actions:       0=INIT  1=SET   2=CLR   3=MOVE  
1002 REM                4=WALK  5=WAIT  -1=END_TRACK

1003 REM directions:    0=UP    1=RI,   2=DO    3=LE
1004 REM                4=UPRI  5=DORI  6=DOLE  7=UPLE 
                                                        
1006 REM action,        V,      W,      X,      Y,      Z
                
1007 REM [0|1|2|3]      -,      data,   x,      y,      slot
1008 REM [4|5]          wait,   steps,  stepw,  dir,    slot            
1009 REM ---------------------------------------------------

2000 REM track1: init + fullcolor walk

2010 REM 0,-1,%E015+(0*260),(8*16),40,0
2020 REM 0,-1,%E015+(1*260),(9*16),40,1
2030 REM 0,-1,%E015+(2*260),(10*16),40,2
2040 REM 0,-1,%E015+(3*260),(11*16),40,3
2050 REM 5,1000,-1,-1,-1,-1
2060 REM 0,-1,%E015+(4*260),(6*16),40,4
2070 REM 5,500,-1,-1,-1,-1
2080 REM 2,-1,-1,-1,-1,4
2090 REM 5,500,-1,-1,-1,-1
2100 REM 1,-1,-1,(6*16),40,4
2110 REM 5,500,-1,-1,-1,-1
2120 REM 2,-1,-1,-1,-1,4
2130 REM 5,500,-1,-1,-1,-1
2140 REM 1,-1,-1,(6*16),40,4
2150 REM 5,1000,-1,-1,-1,-1
2160 REM 4,15,40,1,2,4
2170 REM 4,15,(3*16)+8,1,5,4
2180 REM 4,15,(3*16)+8,1,4,4
2190 REM 4,15,40,1,0,4
2200 REM 4,0,(7*4),4,3,4
2210 REM 5,1000,-1,-1,-1,-1
2220 REM 2,-1,-1,-1,-1,4
2230 REM -1,-1,-1,-1,-1,-1

3000 REM track2: Smiley's, on your place !

3010 REM 5,1000,-1,-1,-1,-1
3020 REM 3,-1,-1,16,192-31,3
3030 REM 5,500,-1,-1,-1,-1
3040 REM 3,-1,-1,320-31,192-31,2
3050 REM 5,500,-1,-1,-1,-1
3060 REM 3,-1,-1,320-31,16,1
3070 REM 5,500,-1,-1,-1,-1
3080 REM 3,-1,-1,16,16,0
3090 REM 5,2000,-1,-1,-1,-1
3100 REM 4,0,89-16,1,2,0
3110 REM 4,0,72-16,1,1,0
3120 REM 4,0,137,1,3,1
3130 REM 4,0,16-8,1,0,1
3140 REM 4,0,57,1,3,2
3150 REM 4,0,72,1,0,2
3160 REM 4,0,137,1,1,3
3170 REM 4,0,16-8,1,2,3
3180 REM 5,2000,-1,-1,-1,-1
3190 REM -1,-1,-1,-1,-1,-1

4000 REM track3: back home ...
    
4010 REM 5,2000,-1,-1,-1,-1
4020 REM 4,0,16-8,1,0,3
4030 REM 4,0,137,1,3,3
4040 REM 4,0,72,1,2,2
4050 REM 4,0,57,1,1,2
4060 REM 4,0,16-8,1,2,1
4070 REM 4,0,137,1,1,1
4080 REM 4,0,72-16,1,3,0
4090 REM 4,0,89-16,1,0,0
4100 REM -1,-1,-1,-1,-1,-1

5000 REM track4: bye ...

5010 REM 5,2000,-1,-1,-1,-1
5020 REM 3,-1,-1,8*16,40,0
5030 REM 5,500,-1,-1,-1,-1
5040 REM 3,-1,-1,9*16,40,1
5050 REM 5,500,-1,-1,-1,-1
5060 REM 3,-1,-1,10*16,40,2
5070 REM 5,500,-1,-1,-1,-1
5080 REM 3,-1,-1,11*16,40,3
5090 REM 5,2000,-1,-1,-1,-1
5100 REM 2,-1,-1,-1,-1,3
5110 REM 2,-1,-1,-1,-1,2
5120 REM 2,-1,-1,-1,-1,1
5130 REM 2,-1,-1,-1,-1,0
5140 REM -1,-1,-1,-1,-1,-1
